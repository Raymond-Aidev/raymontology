#!/bin/sh

# Gradle wrapper script
# This script downloads and runs Gradle

# Determine the Java command to use
if [ -n "$JAVA_HOME" ]; then
    JAVA_CMD="$JAVA_HOME/bin/java"
else
    JAVA_CMD="java"
fi

# Set default JVM options
DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'

# Gradle wrapper jar and properties location
WRAPPER_JAR="gradle/wrapper/gradle-wrapper.jar"
WRAPPER_PROPERTIES="gradle/wrapper/gradle-wrapper.properties"

# Download gradle wrapper jar if not present
if [ ! -f "$WRAPPER_JAR" ]; then
    echo "Downloading Gradle wrapper..."
    mkdir -p gradle/wrapper
    curl -sL -o "$WRAPPER_JAR" "https://github.com/gradle/gradle/raw/v8.2.0/gradle/wrapper/gradle-wrapper.jar"
fi

# Execute Gradle
exec "$JAVA_CMD" $DEFAULT_JVM_OPTS -jar "$WRAPPER_JAR" "$@"
